import{d as J,G as $,r as i,q as h,C as A,h as t,F as D,b as w,m as E,H as K,s as O,o as f,e as Q,x as u,j as V,w as v,y as R,i as x,t as C,z as W,v as X,B as Y,I as Z,J as B,__tla as ee}from"./index-acc4e75c.js";import ae,{__tla as le}from"./details-38384b63.js";import{d as re,a as oe,__tla as te}from"./index-6dde14d2.js";import{u as ne,__tla as ce}from"./dictionary-23bfa069.js";import{__tla as se}from"./index-d768e128.js";let L,ie=Promise.all([(()=>{try{return ee}catch{}})(),(()=>{try{return le}catch{}})(),(()=>{try{return te}catch{}})(),(()=>{try{return ce}catch{}})(),(()=>{try{return se}catch{}})()]).then(async()=>{let b;b={class:"table-box"},L=J({__name:"index",setup(ue){const z=$(),F=i(1);h(()=>z.language);const{t:a}=A(),H=ne(),n=i([]),d=i([]),M=i(),N=i(null),r=i({workName:"",workCode:""}),p=i([]),m=i(!1),S=h(()=>[{prop:"pid",label:a("routerList.p_child"),render:({row:e})=>t(D,null,[e.pid==0?t("span",null,[e.workName]):""])},{prop:"workName",label:a("dictionary.workName"),render:({row:e})=>t(D,null,[e.pid!=0?t("span",null,[e.workName]):""])},{prop:"workCode",label:a("dictionary.workCode")},{prop:"note",label:a("dictionary.note")},{prop:"operation",label:a("excel.operation"),fixed:"right",width:200}]),U=h(()=>[{prop:"workName",label:a("dictionary.workName"),search:{render:({searchParam:e})=>t(w("el-input"),{modelValue:e.workName,modelModifiers:{trim:!0},"onUpdate:modelValue":l=>e.workName=l,placeholder:a("search.placeholder")},null)}},{prop:"workCode",label:a("dictionary.workCode"),search:{render:({searchParam:e})=>t(w("el-input"),{modelValue:e.workCode,modelModifiers:{trim:!0},"onUpdate:modelValue":l=>e.workCode=l,placeholder:a("search.placeholder")},null)}}]),_=async()=>{try{const{data:e,success:l}=await re();if(!l)return;n.value=e,d.value=e}catch{}},j=async()=>{try{await _(),H.setDictionaryList(n.value)}catch{}},g=(e,l)=>{var o;const c={title:e,row:{...l},getTableList:_,tableData:d.value};(o=N.value)==null||o.acceptParams(c)},q=async()=>{r.value.workName==""&&r.value.workCode==""?(n.value=d.value,p.value=[],m.value=!1):r.value.workName!=""?(n.value=d.value.filter(e=>{var l,c,o;if((l=e.workName)!=null&&l.includes(r.value.workName))return(c=e.workName)==null?void 0:c.includes(r.value.workName);{let s=!1;for(const k of e==null?void 0:e.children){if((o=k.workName)!=null&&o.includes(r.value.workName)){s=!0;break}s=!1}return s}}),m.value=!0,p.value=n.value.map(e=>e.id)):r.value.workCode!=""&&(n.value=d.value.filter(e=>{var l,c,o;if((l=e.workCode)!=null&&l.includes(r.value.workCode))return(c=e.workCode)==null?void 0:c.includes(r.value.workCode);{let s=!1;for(const k of e==null?void 0:e.children){if((o=k.workCode)!=null&&o.includes(r.value.workCode)){s=!0;break}s=!1}return s}}),m.value=!0,p.value=n.value.map(e=>e.id))},G=async()=>{r.value={},p.value=[],m.value=!1,n.value=d.value};return E(()=>{K(()=>{_()})}),(e,l)=>{const c=w("SearchForm"),o=w("el-button"),s=w("ProTable"),k=O("auth");return f(),Q("div",b,[t(c,{search:q,reset:G,columns:u(U),"search-param":r.value},null,8,["columns","search-param"]),(f(),V(s,{ref_key:"proTable",ref:M,columns:u(S),data:n.value,"row-key":"id","default-expand-all":m.value,"expand-row-keys":p.value,pagination:!1,key:F.value},{tableHeader:v(y=>[t(o,{type:"primary",size:"default",icon:u(R),onClick:l[0]||(l[0]=P=>g("\u65B0\u589E"))},{default:v(()=>[x(C(u(a)("excel.add")),1)]),_:1},8,["icon"])]),operation:v(y=>[t(o,{type:"primary",link:"",icon:u(W),onClick:P=>g("\u7F16\u8F91",y.row)},{default:v(()=>[x(C(u(a)("excel.edit")),1)]),_:2},1032,["icon","onClick"]),X((f(),V(o,{type:"primary",link:"",icon:u(Y),onClick:P=>(async T=>{Z.confirm(`${T.pid==0?a("excel.is_child_delete"):a("excel.is_delete")}`,a("excel.tip"),{confirmButtonText:a("excel.submit"),cancelButtonText:a("excel.cancel"),type:"warning"}).then(async()=>{const{success:I}=await oe({id:T.id});I?(B.success(a("excel.success_delete")),await _()):B.error(a("excel.error_delete"))}).catch(()=>{})})(y.row)},{default:v(()=>[x(C(u(a)("excel.delete")),1)]),_:2},1032,["icon","onClick"])),[[k,{name:"pollingStandardDel",auth:"isDel"}]])]),_:1},8,["columns","data","default-expand-all","expand-row-keys"])),t(ae,{ref_key:"detail",ref:N,onClearTable:j},null,512)])}}})});export{ie as __tla,L as default};
